
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Diablo IV Master Damage Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #111; color: #eee; padding: 20px; }
        input, select, textarea, label { display: block; margin: 6px 0; width: 100%; max-width: 500px; }
        .section { margin-bottom: 20px; }
        .output { font-weight: bold; color: #4caf50; margin-top: 20px; }
        .damage-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 8px; }
    </style>
</head>
<body>
    <h1>Diablo IV Master Damage Calculator</h1>

    <div class="section">
        <label>Class:
            <select id="characterClass">
                <option>Barbarian</option>
                <option>Rogue</option>
                <option>Sorcerer</option>
                <option>Necromancer</option>
                <option>Druid</option>
                <option>Spiritborn</option>
            </select>
        </label>
        <label>Skill Name: <input type="text" id="skillName" value="Upheaval"></label>
        <label>Base Skill Coefficient: <input type="number" id="baseSkill" value="2.4"></label>
        <label>+Skill Ranks (%): <input type="number" id="skillRankBonus" value="0"></label>
        <label>+Paragon Bonus (%): <input type="number" id="paragonBonus" value="0"></label>
        <label>+Other Buffs (%): <input type="number" id="otherBuffs" value="0"></label>
    </div>

    <div class="section">
        <label>Weapon Base Damage: <input type="number" id="weaponDamage" value="662"></label>
        <label>Crit Chance (%): <input type="number" id="critChance" value="50.8"></label>
        <label>Crit Damage (%): <input type="number" id="critDamage" value="2435.9"></label>
        <label>Vulnerable Bonus (%): <input type="number" id="vulnBonus" value="263"></label>
        <label>Main Stat (Str/Dex/Int/Will/Agility): <input type="number" id="mainStat" value="2177"></label>
    </div>

    <div class="section">
        <h3>Damage Type Bonuses (%)</h3>
        <div class="damage-grid">
            <label>Bleeding: <input type="number" class="additive" value="0"></label>
            <label>Burning: <input type="number" class="additive" value="0"></label>
            <label>Poison: <input type="number" class="additive" value="0"></label>
            <label>Shadow: <input type="number" class="additive" value="0"></label>
            <label>Chilled/Frozen: <input type="number" class="additive" value="0"></label>
            <label>Physical: <input type="number" class="additive" value="0"></label>
            <label>Fire: <input type="number" class="additive" value="0"></label>
            <label>Cold: <input type="number" class="additive" value="0"></label>
            <label>Lightning: <input type="number" class="additive" value="0"></label>
            <label>DoT Damage: <input type="number" class="additive" value="0"></label>
            <label>Core Skill Damage: <input type="number" class="additive" value="0"></label>
            <label>Ultimate Skill Damage: <input type="number" class="additive" value="0"></label>
        </div>
    </div>

    <div class="section">
        <h3>Runes, Gems & Horadric Spellcraft</h3>
        <label>Rune Damage Bonus (%): <input type="number" id="runeBonus" value="0"></label>
        <label>Gem Bonus (%): <input type="number" id="gemBonus" value="0"></label>
        <label>Horadric Spellcraft Bonus (%): <input type="number" id="spellcraftBonus" value="0"></label>
        <label>Number of Multiplicative Modifiers (x1.5 each): <input type="number" id="xMultipliers" value="3"></label>
    </div>

    <button onclick="calculate()">Calculate Total Estimated Damage</button>

    <div class="output" id="resultText"></div>

    <script>
        function calculate() {
            const baseSkill = parseFloat(document.getElementById("baseSkill").value);
            const rankBonus = parseFloat(document.getElementById("skillRankBonus").value) / 100;
            const paragonBonus = parseFloat(document.getElementById("paragonBonus").value) / 100;
            const otherBuffs = parseFloat(document.getElementById("otherBuffs").value) / 100;

            const skillCoefficient = baseSkill * (1 + rankBonus + paragonBonus + otherBuffs);

            const weaponDamage = parseFloat(document.getElementById("weaponDamage").value);
            const baseDamage = weaponDamage * skillCoefficient;

            const additiveInputs = document.querySelectorAll(".additive");
            let totalAdditive = 0;
            additiveInputs.forEach(el => totalAdditive += parseFloat(el.value) || 0);

            totalAdditive += parseFloat(document.getElementById("runeBonus").value) || 0;
            totalAdditive += parseFloat(document.getElementById("gemBonus").value) || 0;
            totalAdditive += parseFloat(document.getElementById("spellcraftBonus").value) || 0;

            const critChance = parseFloat(document.getElementById("critChance").value) / 100;
            const critDamage = parseFloat(document.getElementById("critDamage").value) / 100;
            const vulnBonus = parseFloat(document.getElementById("vulnBonus").value) / 100;
            const mainStat = parseFloat(document.getElementById("mainStat").value);

            let additiveDamage = baseDamage * (1 + totalAdditive / 100);
            let critMult = 1 + (critChance * critDamage);
            let vulnDamage = additiveDamage * critMult * (1 + vulnBonus);
            let statScaled = vulnDamage * (1 + mainStat * 0.001);

            let mult = parseInt(document.getElementById("xMultipliers").value) || 0;
            let finalDamage = statScaled * Math.pow(1.5, mult);

            document.getElementById("resultText").innerText =
                `Final Estimated Damage: ${Math.round(finalDamage).toLocaleString()}`;
        }
    </script>
</body>
</html>
